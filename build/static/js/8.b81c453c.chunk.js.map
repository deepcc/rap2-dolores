{"version":3,"sources":["webpack:///static/js/8.b81c453c.chunk.js","webpack:///./src/components/tester/Tester.jsx","webpack:///./src/components/tester/Tester.css","webpack:///./src/components/tester/Tester.css?da07"],"names":["webpackJsonp","338","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","setPrototypeOf","__proto__","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","length","err","Array","isArray","_createClass","defineProperties","target","props","descriptor","protoProps","staticProps","_react","_react2","_family","_utils","_constant","Tester","_Component","this","_this","getPrototypeOf","switchMod","mod","switchItf","itf","requestProperties","properties","map","property","assign","filter","scope","requestTemplate","Tree","treeToJson","arrayToTree","requestData","Mock","mock","setState","handleRequest","requests","fetch","id","then","res","json","state","uri","URI","serve","removeSearch","setSearch","repositoryId","method","url","proxy","Promise","all","_ref","_ref2","template","schema","data","_Mock$valid","valid","Diff","Assert","nextMatch","match","type","path","actual","expected","result","message","eval","diff","console","warn","updateRequestData","e","_this2","store","context","_props","params","location","repository","fetching","createElement","className","Spin","modules","find","item","interfaces","requestURI","StoreStateRouterLocationURI","Link","to","href","name","onClick","onSubmit","preventDefault","onChange","keys","decodeURI","JSON","stringify","nextProps","Component","contextTypes","PropTypes","object","isRequired","propTypes","mapStateToProps","mapDispatchToProps","connect","429","450","content","locals"],"mappings":"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","file":"static/js/8.b81c453c.chunk.js","sourcesContent":["webpackJsonp([8],{\n\n/***/ 338:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _family = __webpack_require__(5);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tvar _constant = __webpack_require__(19);\n\t\n\t__webpack_require__(450);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Tester = function (_Component) {\n\t  _inherits(Tester, _Component);\n\t\n\t  function Tester(props) {\n\t    _classCallCheck(this, Tester);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Tester.__proto__ || Object.getPrototypeOf(Tester)).call(this, props));\n\t\n\t    _this.switchMod = function (mod) {\n\t      // this.setState({ mod })\n\t    };\n\t\n\t    _this.switchItf = function (itf) {\n\t      var requestProperties = itf.properties.map(function (property) {\n\t        return Object.assign({}, property);\n\t      }).filter(function (property) {\n\t        return property.scope === 'request';\n\t      });\n\t      var requestTemplate = _utils.Tree.treeToJson(_utils.Tree.arrayToTree(requestProperties));\n\t      var requestData = _family.Mock.mock(requestTemplate);\n\t      _this.setState({ requestData: requestData }, function () {\n\t        _this.handleRequest(itf);\n\t      });\n\t    };\n\t\n\t    _this.handleRequest = function (itf) {\n\t      var requests = [fetch(_constant.serve + '/app/mock/template/' + itf.id).then(function (res) {\n\t        return res.json();\n\t      }), fetch(_constant.serve + '/app/mock/schema/' + itf.id).then(function (res) {\n\t        return res.json();\n\t      })];\n\t\n\t      var requestData = _this.state.requestData;\n\t\n\t      var uri = (0, _family.URI)(_constant.serve + '/app/mock/data/' + itf.id);\n\t      for (var key in requestData) {\n\t        if (requestData[key] === '') uri.removeSearch(key);else uri.setSearch(key, requestData[key]);\n\t      }\n\t      requests.push(fetch(uri).then(function (res) {\n\t        return res.json();\n\t      }));\n\t\n\t      var repositoryId = itf.repositoryId,\n\t          method = itf.method,\n\t          url = itf.url;\n\t\n\t      var target = _this.state.target + '/app/mock/' + repositoryId + '/' + method + '/' + url;\n\t      var proxy = _constant.serve + '/proxy?target=' + target;\n\t      requests.push(fetch(proxy).then(function (res) {\n\t        return res.json();\n\t      }));\n\t\n\t      Promise.all(requests).then(function (_ref) {\n\t        var _ref2 = _slicedToArray(_ref, 4),\n\t            template = _ref2[0],\n\t            schema = _ref2[1],\n\t            data = _ref2[2],\n\t            target = _ref2[3];\n\t\n\t        _this.setState({ template: template, schema: schema, data: data });\n\t\n\t        var _Mock$valid = _family.Mock.valid,\n\t            Diff = _Mock$valid.Diff,\n\t            Assert = _Mock$valid.Assert;\n\t\n\t        var nextMatch = Assert.match;\n\t        Assert.match = function (type, path, actual, expected, result, message) {\n\t          if (typeof expected === 'string') expected = eval('(' + expected + ')'); // eslint-disable-line no-eval\n\t          nextMatch(type, path, actual, expected, result, message);\n\t        };\n\t        var result = Diff.diff(schema, target);\n\t        for (var i = 0; i < result.length; i++) {\n\t          console.warn(Assert.message(result[i]));\n\t        }\n\t      });\n\t    };\n\t\n\t    _this.updateRequestData = function (e, key, value) {\n\t      _this.setState({\n\t        requestData: Object.assign({}, _this.state.requestData, _defineProperty({}, key, value))\n\t      });\n\t    };\n\t\n\t    _this.state = {\n\t      requestData: {},\n\t      template: null,\n\t      schema: null,\n\t      data: null,\n\t      target: _constant.serve\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Tester, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var _this2 = this;\n\t\n\t      var store = this.context.store;\n\t      var _props = this.props,\n\t          params = _props.location.params,\n\t          repository = _props.repository;\n\t\n\t      if (!repository.fetching && !repository.data) return _react2.default.createElement(\n\t        'div',\n\t        { className: 'p100 fontsize-40 text-center' },\n\t        '404'\n\t      );\n\t\n\t      repository = repository.data;\n\t      if (!repository.id) return _react2.default.createElement(_utils.Spin, null); // // DONE 2.2 每次获取仓库都显示加载动画不合理，应该只在初始加载时显示动画。\n\t\n\t      var mod = repository && repository.modules && repository.modules.length ? repository.modules.find(function (item) {\n\t        return item.id === +params.mod;\n\t      }) || repository.modules[0] : {};\n\t      var itf = mod.interfaces && mod.interfaces.length ? mod.interfaces.find(function (item) {\n\t        return item.id === +params.itf;\n\t      }) || mod.interfaces[0] : {};\n\t      // let properties = itf.properties || []\n\t\n\t      var requestData = this.state.requestData;\n\t\n\t      var requestURI = (0, _family.URI)(_constant.serve + '/app/mock/data/' + itf.id);\n\t      for (var key in requestData) {\n\t        if (requestData[key] === '') requestURI.removeSearch(key);else requestURI.setSearch(key, requestData[key]);\n\t      }\n\t      var uri = (0, _family.StoreStateRouterLocationURI)(store).removeSearch('itf');\n\t      return _react2.default.createElement(\n\t        'section',\n\t        { className: 'Tester' },\n\t        _react2.default.createElement(\n\t          'div',\n\t          { className: 'header' },\n\t          _react2.default.createElement(\n\t            'div',\n\t            { className: 'card-mods clearfix' },\n\t            _react2.default.createElement(\n\t              'div',\n\t              { className: 'card-title' },\n\t              '\\u6A21\\u5757\\uFF1A'\n\t            ),\n\t            _react2.default.createElement(\n\t              'ul',\n\t              { className: 'clearfix' },\n\t              repository.modules.map(function (item) {\n\t                return _react2.default.createElement(\n\t                  'li',\n\t                  { key: item.id, className: item.id === mod.id ? 'active' : '' },\n\t                  _react2.default.createElement(\n\t                    _family.Link,\n\t                    { to: uri.setSearch('mod', item.id).href() },\n\t                    item.name\n\t                  )\n\t                );\n\t              })\n\t            )\n\t          ),\n\t          _react2.default.createElement(\n\t            'div',\n\t            { className: 'card-itfs clearfix' },\n\t            _react2.default.createElement(\n\t              'div',\n\t              { className: 'card-title' },\n\t              '\\u63A5\\u53E3\\uFF1A'\n\t            ),\n\t            _react2.default.createElement(\n\t              'ul',\n\t              { className: 'clearfix' },\n\t              mod.interfaces.map(function (item) {\n\t                return _react2.default.createElement(\n\t                  'li',\n\t                  { key: item.id, className: item.id === itf.id ? 'active' : '' },\n\t                  _react2.default.createElement(\n\t                    _family.Link,\n\t                    { to: uri.setSearch('mod', mod.id).setSearch('itf', item.id).href(), onClick: function onClick(e) {\n\t                        return _this2.switchItf(item);\n\t                      } },\n\t                    item.name\n\t                  )\n\t                );\n\t              })\n\t            )\n\t          )\n\t        ),\n\t        _react2.default.createElement(\n\t          'div',\n\t          { className: 'body' },\n\t          _react2.default.createElement(\n\t            'div',\n\t            { className: 'card-props clearfix' },\n\t            _react2.default.createElement(\n\t              'form',\n\t              { onSubmit: function onSubmit(e) {\n\t                  e.preventDefault();_this2.handleRequest(itf);\n\t                } },\n\t              _react2.default.createElement(\n\t                'div',\n\t                { className: 'mb6 ml6 font-bold' },\n\t                '\\u4E1A\\u52A1\\u7CFB\\u7EDF\\uFF1A'\n\t              ),\n\t              _react2.default.createElement('input', { value: this.state.target, onChange: function onChange(e) {\n\t                  return _this2.setState({ target: e.target.value });\n\t                }, className: 'form-control' }),\n\t              _react2.default.createElement(\n\t                'ul',\n\t                { className: 'fields clearfix' },\n\t                Object.keys(requestData).map(function (key) {\n\t                  return _react2.default.createElement(\n\t                    'li',\n\t                    { key: key, className: 'filed' },\n\t                    _react2.default.createElement(\n\t                      'div',\n\t                      { className: 'label' },\n\t                      key\n\t                    ),\n\t                    _react2.default.createElement('input', { value: requestData[key], onChange: function onChange(e) {\n\t                        return _this2.updateRequestData(e, key, e.target.value);\n\t                      }, className: 'form-control' })\n\t                  );\n\t                })\n\t              ),\n\t              _react2.default.createElement(\n\t                'button',\n\t                { className: 'btn btn-success', type: 'submit' },\n\t                'Submit'\n\t              )\n\t            )\n\t          ),\n\t          _react2.default.createElement(\n\t            'div',\n\t            { className: 'card-result' },\n\t            _react2.default.createElement(\n\t              'div',\n\t              { className: 'card-title' },\n\t              _react2.default.createElement(\n\t                _family.Link,\n\t                { to: requestURI.href(), target: '_blank' },\n\t                decodeURI(requestURI.href())\n\t              )\n\t            ),\n\t            _react2.default.createElement(\n\t              'div',\n\t              null,\n\t              _react2.default.createElement(\n\t                'pre',\n\t                null,\n\t                JSON.stringify(this.state.data, null, 2)\n\t              )\n\t            )\n\t          )\n\t        )\n\t      );\n\t    }\n\t  }, {\n\t    key: 'componentWillReceiveProps',\n\t    value: function componentWillReceiveProps(nextProps) {\n\t      // let { repository } = nextProps\n\t      // repository = repository.data\n\t      // if (!repository.id) return\n\t      // let mod = this.state.mod || repository.modules[0]\n\t      // let itf = this.state.itf || mod.interfaces[0]\n\t      // this.switchMod(undefined, mod)\n\t      // this.switchItf(undefined, itf)\n\t    }\n\t  }]);\n\t\n\t  return Tester;\n\t}(_react.Component);\n\t// 容器组件\n\t\n\t\n\tTester.contextTypes = {\n\t  store: _family.PropTypes.object.isRequired\n\t};\n\tTester.propTypes = {\n\t  repository: _family.PropTypes.object.isRequired,\n\t  location: _family.PropTypes.object.isRequired\n\t};\n\tvar mapStateToProps = function mapStateToProps(state) {\n\t  return {\n\t    repository: state.repository\n\t  };\n\t};\n\tvar mapDispatchToProps = {};\n\texports.default = (0, _family.connect)(mapStateToProps, mapDispatchToProps)(Tester);\n\n/***/ },\n\n/***/ 429:\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(16)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".Tester .header{padding:2rem 2rem 1rem;border-bottom:1px solid #e1e4e8;background-color:#fafbfc}.Tester .header .card-itfs,.Tester .header .card-mods{display:-ms-flexbox;display:flex;margin-bottom:1rem}.Tester .header .card-itfs>.card-title,.Tester .header .card-mods>.card-title{margin-bottom:0;width:5rem;min-width:5rem;font-size:1.4rem}.Tester .header .card-itfs>ul,.Tester .header .card-mods>ul{margin-bottom:0;padding-left:0;list-style:none}.Tester .header .card-itfs>ul>li,.Tester .header .card-mods>ul>li{float:left;margin-right:1rem;padding:2px 0;width:10rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.Tester .header .card-itfs>ul>li a,.Tester .header .card-mods>ul>li a{color:#666}.Tester .header .card-itfs>ul>li.active a,.Tester .header .card-mods>ul>li.active a{color:#4a7bf7}.Tester .body{padding:2rem}.Tester .body .card-props{margin-bottom:2rem}.Tester .body .card-props ul.fields{list-style:none;padding-left:0}.Tester .body .card-props ul.fields>li.filed{float:left;margin-right:1rem;width:10rem}.Tester .body .card-props ul.fields>li.filed .label{margin-bottom:.5rem;padding-left:.5rem;font-weight:700}.Tester .body .card-result{margin-top:1rem}.Tester .body .card-result .card-title{font-size:1.2rem;margin-bottom:1rem}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n\n/***/ 450:\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(429);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(17)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Tester.css\", function() {\n\t\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Tester.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/8.b81c453c.chunk.js","import React, { Component } from 'react'\r\nimport { PropTypes, connect, Link, Mock, URI, StoreStateRouterLocationURI } from '../../family'\r\nimport { Spin, Tree } from '../utils'\r\nimport { serve } from '../../relatives/services/constant'\r\nimport './Tester.css'\r\n\r\nclass Tester extends Component {\r\n  static contextTypes = {\r\n    store: PropTypes.object.isRequired\r\n  }\r\n  static propTypes = {\r\n    repository: PropTypes.object.isRequired,\r\n    location: PropTypes.object.isRequired\r\n  }\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      requestData: {},\r\n      template: null,\r\n      schema: null,\r\n      data: null,\r\n      target: serve\r\n    }\r\n  }\r\n  render () {\r\n    let { store } = this.context\r\n    let { location: { params }, repository } = this.props\r\n    if (!repository.fetching && !repository.data) return <div className='p100 fontsize-40 text-center'>404</div>\r\n\r\n    repository = repository.data\r\n    if (!repository.id) return <Spin /> // // DONE 2.2 每次获取仓库都显示加载动画不合理，应该只在初始加载时显示动画。\r\n\r\n    let mod = repository && repository.modules && repository.modules.length\r\n      ? (repository.modules.find(item => item.id === +params.mod) || repository.modules[0]) : {}\r\n    let itf = mod.interfaces && mod.interfaces.length\r\n      ? (mod.interfaces.find(item => item.id === +params.itf) || mod.interfaces[0]) : {}\r\n    // let properties = itf.properties || []\r\n\r\n    let { requestData } = this.state\r\n    let requestURI = URI(`${serve}/app/mock/data/${itf.id}`)\r\n    for (let key in requestData) {\r\n      if (requestData[key] === '') requestURI.removeSearch(key)\r\n      else requestURI.setSearch(key, requestData[key])\r\n    }\r\n    let uri = StoreStateRouterLocationURI(store).removeSearch('itf')\r\n    return (\r\n      <section className='Tester'>\r\n        <div className='header'>\r\n          <div className='card-mods clearfix'>\r\n            <div className='card-title'>模块：</div>\r\n            <ul className='clearfix'>\r\n              {repository.modules.map(item =>\r\n                <li key={item.id} className={item.id === mod.id ? 'active' : ''}>\r\n                  <Link to={uri.setSearch('mod', item.id).href()}>{item.name}</Link>\r\n                </li>\r\n              )}\r\n            </ul>\r\n          </div>\r\n          <div className='card-itfs clearfix'>\r\n            <div className='card-title'>接口：</div>\r\n            <ul className='clearfix'>\r\n              {mod.interfaces.map(item =>\r\n                <li key={item.id} className={item.id === itf.id ? 'active' : ''}>\r\n                  <Link to={uri.setSearch('mod', mod.id).setSearch('itf', item.id).href()} onClick={e => this.switchItf(item)}>{item.name}</Link>\r\n                </li>\r\n              )}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <div className='body'>\r\n          <div className='card-props clearfix'>\r\n            <form onSubmit={e => { e.preventDefault(); this.handleRequest(itf) }}>\r\n              <div className='mb6 ml6 font-bold'>业务系统：</div>\r\n              <input value={this.state.target} onChange={e => this.setState({ target: e.target.value })} className='form-control' />\r\n              <ul className='fields clearfix'>\r\n                {Object.keys(requestData).map(key =>\r\n                  <li key={key} className='filed'>\r\n                    <div className='label'>{key}</div>\r\n                    <input value={requestData[key]} onChange={e => this.updateRequestData(e, key, e.target.value)} className='form-control' />\r\n                  </li>\r\n                )}\r\n              </ul>\r\n              <button className='btn btn-success' type='submit'>Submit</button>\r\n            </form>\r\n          </div>\r\n          <div className='card-result'>\r\n            <div className='card-title'>\r\n              <Link to={requestURI.href()} target='_blank'>{decodeURI(requestURI.href())}</Link>\r\n            </div>\r\n            <div>\r\n              <pre>{JSON.stringify(this.state.data, null, 2)}</pre>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    )\r\n  }\r\n  componentWillReceiveProps (nextProps) {\r\n    // let { repository } = nextProps\r\n    // repository = repository.data\r\n    // if (!repository.id) return\r\n    // let mod = this.state.mod || repository.modules[0]\r\n    // let itf = this.state.itf || mod.interfaces[0]\r\n    // this.switchMod(undefined, mod)\r\n    // this.switchItf(undefined, itf)\r\n  }\r\n  switchMod = (mod) => {\r\n    // this.setState({ mod })\r\n  }\r\n  switchItf = (itf) => {\r\n    let requestProperties = itf.properties.map(property => ({ ...property })).filter(property => property.scope === 'request')\r\n    let requestTemplate = Tree.treeToJson(Tree.arrayToTree(requestProperties))\r\n    let requestData = Mock.mock(requestTemplate)\r\n    this.setState({ requestData }, () => {\r\n      this.handleRequest(itf)\r\n    })\r\n  }\r\n  handleRequest = (itf) => {\r\n    let requests = [\r\n      fetch(`${serve}/app/mock/template/${itf.id}`).then(res => res.json()),\r\n      fetch(`${serve}/app/mock/schema/${itf.id}`).then(res => res.json())\r\n    ]\r\n\r\n    let { requestData } = this.state\r\n    let uri = URI(`${serve}/app/mock/data/${itf.id}`)\r\n    for (let key in requestData) {\r\n      if (requestData[key] === '') uri.removeSearch(key)\r\n      else uri.setSearch(key, requestData[key])\r\n    }\r\n    requests.push(\r\n      fetch(uri).then(res => res.json())\r\n    )\r\n\r\n    let { repositoryId, method, url } = itf\r\n    let target = `${this.state.target}/app/mock/${repositoryId}/${method}/${url}`\r\n    let proxy = `${serve}/proxy?target=${target}`\r\n    requests.push(\r\n      fetch(proxy).then(res => res.json())\r\n    )\r\n\r\n    Promise.all(requests).then(([template, schema, data, target]) => {\r\n      this.setState({ template, schema, data })\r\n\r\n      let { Diff, Assert } = Mock.valid\r\n      let nextMatch = Assert.match\r\n      Assert.match = function (type, path, actual, expected, result, message) {\r\n        if (typeof expected === 'string') expected = eval('(' + expected + ')') // eslint-disable-line no-eval\r\n        nextMatch(type, path, actual, expected, result, message)\r\n      }\r\n      var result = Diff.diff(schema, target)\r\n      for (var i = 0; i < result.length; i++) {\r\n        console.warn(Assert.message(result[i]))\r\n      }\r\n    })\r\n  }\r\n  updateRequestData = (e, key, value) => {\r\n    this.setState({\r\n      requestData: { ...this.state.requestData, [key]: value }\r\n    })\r\n  }\r\n}\r\n// 容器组件\r\nconst mapStateToProps = (state) => ({\r\n  repository: state.repository\r\n})\r\nconst mapDispatchToProps = ({})\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Tester)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/tester/Tester.jsx","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".Tester .header{padding:2rem 2rem 1rem;border-bottom:1px solid #e1e4e8;background-color:#fafbfc}.Tester .header .card-itfs,.Tester .header .card-mods{display:-ms-flexbox;display:flex;margin-bottom:1rem}.Tester .header .card-itfs>.card-title,.Tester .header .card-mods>.card-title{margin-bottom:0;width:5rem;min-width:5rem;font-size:1.4rem}.Tester .header .card-itfs>ul,.Tester .header .card-mods>ul{margin-bottom:0;padding-left:0;list-style:none}.Tester .header .card-itfs>ul>li,.Tester .header .card-mods>ul>li{float:left;margin-right:1rem;padding:2px 0;width:10rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.Tester .header .card-itfs>ul>li a,.Tester .header .card-mods>ul>li a{color:#666}.Tester .header .card-itfs>ul>li.active a,.Tester .header .card-mods>ul>li.active a{color:#4a7bf7}.Tester .body{padding:2rem}.Tester .body .card-props{margin-bottom:2rem}.Tester .body .card-props ul.fields{list-style:none;padding-left:0}.Tester .body .card-props ul.fields>li.filed{float:left;margin-right:1rem;width:10rem}.Tester .body .card-props ul.fields>li.filed .label{margin-bottom:.5rem;padding-left:.5rem;font-weight:700}.Tester .body .card-result{margin-top:1rem}.Tester .body .card-result .card-title{font-size:1.2rem;margin-bottom:1rem}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?importLoaders=1!./~/postcss-loader!./src/components/tester/Tester.css\n// module id = 429\n// module chunks = 8","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Tester.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Tester.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Tester.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tester/Tester.css\n// module id = 450\n// module chunks = 8"],"sourceRoot":""}