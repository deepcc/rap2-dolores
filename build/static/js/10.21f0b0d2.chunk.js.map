{"version":3,"sources":["webpack:///static/js/10.21f0b0d2.chunk.js","webpack:///./src/components/checker/Checker.jsx","webpack:///./src/components/checker/Checker.css","webpack:///./src/components/checker/Checker.css?56f2"],"names":["webpackJsonp","312","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","length","err","Array","isArray","_createClass","defineProperties","target","props","descriptor","key","protoProps","staticProps","_react","_react2","_family","_utils","_constant","_mockjs","_mockjs2","Checker","_Component","this","_this","getPrototypeOf","switchMod","e","mod","preventDefault","setState","switchItf","itf","handleRequest","_this$state$itf","state","repositoryId","method","url","proxy","requests","fetch","id","then","res","json","Promise","all","_ref","_ref2","schema","data","_Mock$valid","valid","Diff","Assert","nextMatch","match","type","path","actual","expected","result","message","eval","diff","console","log","warn","_this2","repository","fetching","createElement","Spin","modules","interfaces","className","map","item","Link","to","onClick","name","onChange","serve","JSON","stringify","nextProps","_this3","Component","contextTypes","store","PropTypes","object","isRequired","propTypes","mapStateToProps","auth","mapDispatchToProps","connect","426","443","content","locals"],"mappings":"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","file":"static/js/10.21f0b0d2.chunk.js","sourcesContent":["webpackJsonp([10],{\n\n/***/ 312:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _family = __webpack_require__(5);\n\t\n\tvar _utils = __webpack_require__(6);\n\t\n\tvar _constant = __webpack_require__(19);\n\t\n\tvar _mockjs = __webpack_require__(21);\n\t\n\tvar _mockjs2 = _interopRequireDefault(_mockjs);\n\t\n\t__webpack_require__(443);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Checker = function (_Component) {\n\t  _inherits(Checker, _Component);\n\t\n\t  function Checker(props) {\n\t    _classCallCheck(this, Checker);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Checker.__proto__ || Object.getPrototypeOf(Checker)).call(this, props));\n\t\n\t    _this.switchMod = function (e, mod) {\n\t      e.preventDefault();\n\t      _this.setState({ mod: mod });\n\t    };\n\t\n\t    _this.switchItf = function (e, itf) {\n\t      e.preventDefault();\n\t      _this.setState({ itf: itf }, function () {\n\t        _this.handleRequest();\n\t      });\n\t    };\n\t\n\t    _this.handleRequest = function () {\n\t      var _this$state$itf = _this.state.itf,\n\t          repositoryId = _this$state$itf.repositoryId,\n\t          method = _this$state$itf.method,\n\t          url = _this$state$itf.url;\n\t\n\t      var target = _this.state.target + '/app/mock/' + repositoryId + '/' + method + '/' + url;\n\t      var proxy = _constant.serve + '/proxy?target=' + target;\n\t      var requests = [fetch(_constant.serve + '/app/mock/schema/' + _this.state.itf.id).then(function (res) {\n\t        return res.json();\n\t      }), fetch(proxy).then(function (res) {\n\t        return res.json();\n\t      })];\n\t      Promise.all(requests).then(function (_ref) {\n\t        var _ref2 = _slicedToArray(_ref, 2),\n\t            schema = _ref2[0],\n\t            data = _ref2[1];\n\t\n\t        var _Mock$valid = _mockjs2.default.valid,\n\t            Diff = _Mock$valid.Diff,\n\t            Assert = _Mock$valid.Assert;\n\t\n\t        var nextMatch = Assert.match;\n\t        Assert.match = function (type, path, actual, expected, result, message) {\n\t          if (typeof expected === 'string') expected = eval('(' + expected + ')'); // eslint-disable-line no-eval\n\t          nextMatch(type, path, actual, expected, result, message);\n\t        };\n\t        var result = Diff.diff(schema, data);\n\t        console.log(result);\n\t        for (var i = 0; i < result.length; i++) {\n\t          console.warn(Assert.message(result[i]));\n\t        }\n\t      });\n\t    };\n\t\n\t    _this.state = {\n\t      mod: null,\n\t      itf: null,\n\t      target: _constant.serve\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Checker, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var _this2 = this;\n\t\n\t      var repository = this.props.repository;\n\t\n\t      if (repository.fetching) return _react2.default.createElement(_utils.Spin, null);\n\t\n\t      repository = repository.data;\n\t      var mod = this.state.mod || repository.modules[0];\n\t      var itf = this.state.itf || mod.interfaces[0];\n\t      return _react2.default.createElement(\n\t        'section',\n\t        { className: 'Checker' },\n\t        _react2.default.createElement(\n\t          'div',\n\t          { className: 'card-mods clearfix' },\n\t          _react2.default.createElement(\n\t            'span',\n\t            { className: 'card-title' },\n\t            '\\u6A21\\u5757\\uFF1A'\n\t          ),\n\t          repository.modules.map(function (item) {\n\t            return _react2.default.createElement(\n\t              _family.Link,\n\t              { key: item.id, to: '', onClick: function onClick(e) {\n\t                  return _this2.switchMod(e, item);\n\t                }, className: item.id === mod.id ? 'active' : '' },\n\t              item.name\n\t            );\n\t          })\n\t        ),\n\t        _react2.default.createElement(\n\t          'div',\n\t          { className: 'card-itfs clearfix' },\n\t          _react2.default.createElement(\n\t            'span',\n\t            { className: 'card-title' },\n\t            '\\u63A5\\u53E3\\uFF1A'\n\t          ),\n\t          mod.interfaces.map(function (item) {\n\t            return _react2.default.createElement(\n\t              _family.Link,\n\t              { key: item.id, to: '', onClick: function onClick(e) {\n\t                  return _this2.switchItf(e, item);\n\t                }, className: item.id === itf.id ? 'active' : '' },\n\t              item.name\n\t            );\n\t          })\n\t        ),\n\t        _react2.default.createElement(\n\t          'div',\n\t          null,\n\t          _react2.default.createElement('input', { value: this.state.target, onChange: function onChange(e) {\n\t              return _this2.setState({ target: e.target.value });\n\t            }, className: 'form-control' })\n\t        ),\n\t        _react2.default.createElement(\n\t          'div',\n\t          { className: 'card-result' },\n\t          _react2.default.createElement(\n\t            'div',\n\t            { className: 'card-title' },\n\t            _constant.serve + '/app/mock/data/' + itf.id\n\t          ),\n\t          _react2.default.createElement(\n\t            'pre',\n\t            null,\n\t            JSON.stringify(this.state.result, null, 2)\n\t          )\n\t        )\n\t      );\n\t    }\n\t  }, {\n\t    key: 'componentWillReceiveProps',\n\t    value: function componentWillReceiveProps(nextProps) {\n\t      var _this3 = this;\n\t\n\t      var repository = nextProps.repository;\n\t\n\t      repository = repository.data;\n\t      if (!repository.id) return;\n\t      var mod = this.state.mod || repository.modules[0];\n\t      var itf = this.state.itf || mod.interfaces[0];\n\t      fetch(_constant.serve + '/app/mock/data/' + itf.id).then(function (res) {\n\t        return res.json();\n\t      }).then(function (json) {\n\t        _this3.setState({ result: json });\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return Checker;\n\t}(_react.Component);\n\t// 容器组件\n\t\n\t\n\tChecker.contextTypes = {\n\t  store: _family.PropTypes.object.isRequired\n\t};\n\tChecker.propTypes = {\n\t  repository: _family.PropTypes.object.isRequired\n\t};\n\tvar mapStateToProps = function mapStateToProps(state) {\n\t  return {\n\t    auth: state.auth,\n\t    repository: state.repository\n\t  };\n\t};\n\tvar mapDispatchToProps = {};\n\texports.default = (0, _family.connect)(mapStateToProps, mapDispatchToProps)(Checker);\n\n/***/ },\n\n/***/ 426:\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(16)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".Checker{padding:2rem}.Checker .card-itfs .card-title,.Checker .card-mods .card-title{float:left;width:5rem;font-size:1.4rem}.Checker .card-itfs a,.Checker .card-mods a{float:left;margin-right:1rem;width:10rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#666}.Checker .card-itfs a.active,.Checker .card-mods a.active{color:#4a7bf7}.Checker .card-result{margin-top:1rem}.Checker .card-result .card-title{font-size:1.4rem;margin-bottom:1rem}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n\n/***/ 443:\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(426);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(17)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Checker.css\", function() {\n\t\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Checker.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/10.21f0b0d2.chunk.js","import React, { Component } from 'react'\r\nimport { PropTypes, connect, Link } from '../../family'\r\nimport { Spin } from '../utils'\r\nimport { serve } from '../../relatives/services/constant'\r\nimport Mock from 'mockjs'\r\nimport './Checker.css'\r\n\r\nclass Checker extends Component {\r\n  static contextTypes = {\r\n    store: PropTypes.object.isRequired\r\n  }\r\n  static propTypes = {\r\n    repository: PropTypes.object.isRequired\r\n  }\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      mod: null,\r\n      itf: null,\r\n      target: serve\r\n    }\r\n  }\r\n  render () {\r\n    let { repository } = this.props\r\n    if (repository.fetching) return <Spin />\r\n\r\n    repository = repository.data\r\n    let mod = this.state.mod || repository.modules[0]\r\n    let itf = this.state.itf || mod.interfaces[0]\r\n    return (\r\n      <section className='Checker'>\r\n        <div className='card-mods clearfix'>\r\n          <span className='card-title'>模块：</span>\r\n          {repository.modules.map(item =>\r\n            <Link key={item.id} to='' onClick={e => this.switchMod(e, item)} className={item.id === mod.id ? 'active' : ''}>{item.name}</Link>\r\n          )}\r\n        </div>\r\n        <div className='card-itfs clearfix'>\r\n          <span className='card-title'>接口：</span>\r\n          {mod.interfaces.map(item =>\r\n            <Link key={item.id} to='' onClick={e => this.switchItf(e, item)} className={item.id === itf.id ? 'active' : ''}>{item.name}</Link>\r\n          )}\r\n        </div>\r\n        <div>\r\n          <input value={this.state.target} onChange={e => this.setState({ target: e.target.value })} className='form-control' />\r\n        </div>\r\n        <div className='card-result'>\r\n          <div className='card-title'>{`${serve}/app/mock/data/${itf.id}`}</div>\r\n          <pre>{JSON.stringify(this.state.result, null, 2)}</pre>\r\n        </div>\r\n      </section>\r\n    )\r\n  }\r\n  componentWillReceiveProps (nextProps) {\r\n    let { repository } = nextProps\r\n    repository = repository.data\r\n    if (!repository.id) return\r\n    let mod = this.state.mod || repository.modules[0]\r\n    let itf = this.state.itf || mod.interfaces[0]\r\n    fetch(`${serve}/app/mock/data/${itf.id}`)\r\n      .then(res => res.json())\r\n      .then(json => {\r\n        this.setState({ result: json })\r\n      })\r\n  }\r\n  switchMod = (e, mod) => {\r\n    e.preventDefault()\r\n    this.setState({ mod })\r\n  }\r\n  switchItf = (e, itf) => {\r\n    e.preventDefault()\r\n    this.setState({ itf }, () => {\r\n      this.handleRequest()\r\n    })\r\n  }\r\n  handleRequest = () => {\r\n    let { repositoryId, method, url } = this.state.itf\r\n    let target = `${this.state.target}/app/mock/${repositoryId}/${method}/${url}`\r\n    let proxy = `${serve}/proxy?target=${target}`\r\n    let requests = [\r\n      fetch(`${serve}/app/mock/schema/${this.state.itf.id}`).then(res => res.json()),\r\n      fetch(proxy).then(res => res.json())\r\n    ]\r\n    Promise.all(requests).then(([schema, data]) => {\r\n      let { Diff, Assert } = Mock.valid\r\n      let nextMatch = Assert.match\r\n      Assert.match = function (type, path, actual, expected, result, message) {\r\n        if (typeof expected === 'string') expected = eval('(' + expected + ')') // eslint-disable-line no-eval\r\n        nextMatch(type, path, actual, expected, result, message)\r\n      }\r\n      var result = Diff.diff(schema, data)\r\n      console.log(result)\r\n      for (var i = 0; i < result.length; i++) {\r\n        console.warn(Assert.message(result[i]))\r\n      }\r\n    })\r\n  }\r\n}\r\n// 容器组件\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth,\r\n  repository: state.repository\r\n})\r\nconst mapDispatchToProps = ({})\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Checker)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/checker/Checker.jsx","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".Checker{padding:2rem}.Checker .card-itfs .card-title,.Checker .card-mods .card-title{float:left;width:5rem;font-size:1.4rem}.Checker .card-itfs a,.Checker .card-mods a{float:left;margin-right:1rem;width:10rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#666}.Checker .card-itfs a.active,.Checker .card-mods a.active{color:#4a7bf7}.Checker .card-result{margin-top:1rem}.Checker .card-result .card-title{font-size:1.4rem;margin-bottom:1rem}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?importLoaders=1!./~/postcss-loader!./src/components/checker/Checker.css\n// module id = 426\n// module chunks = 10","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Checker.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Checker.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?importLoaders=1!../../../node_modules/postcss-loader/index.js!./Checker.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/checker/Checker.css\n// module id = 443\n// module chunks = 10"],"sourceRoot":""}